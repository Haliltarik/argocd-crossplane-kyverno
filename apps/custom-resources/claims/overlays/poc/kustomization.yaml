apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base

patches:
  - target:
      kind: BucketClaim
      name: bucket-claim-base
    patch: |-
      # donner un nom au bucket
      - op: replace
        path: /metadata/name
        value: test-crossplane-bucket-poc-xrd-407083967603-tamt
      - op: replace
        path: /spec/bucketName
        value: test-crossplane-bucket-poc-xrd-407083967603-tamt
      # Mettre des tags
      - op: replace
        path: /spec/tags
        value:
          - key: Environment
            value: poc
          - key: Owner
            value: fac
      # # Activer le SSL et le chiffrement
      - op: replace
        path: /spec/requireSSL
        value: true
      - op: replace
        path: /spec/encryption
        value: true